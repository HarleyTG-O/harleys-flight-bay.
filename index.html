<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Harley's Flight Bay Database</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div id="app">
        <div id="welcome-view" class="card">
            <h1>Welcome to Harley's Flight Bay Database</h1>
            <p>Secure portal for Admin and Support to view and manage Harley's Flight Bay user data.</p>
            <div class="actions">
                <button id="go-to-login">Continue</button>
            </div>
        </div>

        <div id="login-view" class="card hidden">
            <h1>Login</h1>
            <p>Login as a Support Agent or Admin.</p>
            <form id="login-form">
                <label for="username">Username</label>
                <input id="username" name="username" type="text" autocomplete="username" required>
                <label for="password">Password</label>
                <input id="password" name="password" type="password" autocomplete="current-password" required>
                <button type="submit">Login</button>
                <p id="login-error" class="error" aria-live="polite"></p>
            </form>
            <div class="card" style="margin-top: 12px;">
                <h2>GitHub Token (optional)</h2>
                <p class="muted">Stored locally in your browser to increase API limits and enable saving.</p>
                <label for="gh-token">Personal Access Token</label>
                <input id="gh-token" type="password" placeholder="ghp_..." autocomplete="off">
                <div class="actions" style="margin-top: 8px;">
                    <button id="save-token" type="button">Save Token</button>
                    <button id="clear-token" type="button">Clear</button>
                </div>
            </div>
        </div>

        <div id="dashboard-view" class="hidden">
            <header class="toolbar">
                <div class="left">
                    <h1>Harley's Flight Bay Database</h1>
                    <span id="repo-label"></span>
                </div>
                <div class="right">
                    <input id="search" type="search" placeholder="Search username or user_id...">
                    <button id="export-csv">Export CSV</button>
                    <button id="logout">Logout</button>
                </div>
            </header>

            <section class="stats" id="stats"></section>

            <section id="user-admin" class="card hidden" style="max-width: 100%; margin-top: 16px;">
                <h2>User Management</h2>
                <p id="user-admin-note" class="muted">Admin only.</p>
                <form id="add-user-form" style="display: grid; grid-template-columns: repeat(5, minmax(0, 1fr)); gap: 8px; align-items: end;">
                    <div>
                        <label for="new-username">Username</label>
                        <input id="new-username" type="text" placeholder="e.g. support01">
                    </div>
                    <div>
                        <label for="new-role">Role</label>
                        <select id="new-role">
                            <option value="support">Support</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <div>
                        <label for="new-password">Password</label>
                        <input id="new-password" type="password" placeholder="Set password">
                    </div>
                    <div>
                        <label for="new-password2">Confirm</label>
                        <input id="new-password2" type="password" placeholder="Confirm password">
                    </div>
                    <div>
                        <button id="add-user-btn" type="submit">Add User</button>
                    </div>
                </form>
                <div class="table-wrapper" style="margin-top: 12px;">
                    <table id="users-admin-table">
                        <thead>
                            <tr>
                                <th>Username</th>
                                <th>Role</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
                <p id="user-admin-error" class="error" aria-live="polite"></p>
                <p id="user-admin-success" style="color:#22c55e;"></p>
            </section>

            <div class="table-wrapper">
                <table id="users-table">
                    <thead>
                        <tr>
                            <th>Username</th>
                            <th>User ID</th>
                            <th>Created</th>
                            <th>Total Orders</th>
                            <th>Completed</th>
                            <th>Cancelled</th>
                            <th>Total Spent</th>
                            <th>Last Completed</th>
                            <th>Last Order ID</th>
                            <th>Folder</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="./app.js" type="module"></script>
    <noscript>This admin requires JavaScript enabled.</noscript>
</body>
</html>


